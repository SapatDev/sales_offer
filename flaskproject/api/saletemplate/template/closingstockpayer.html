{% extends 'base.html' %}


{% block content %}
<!-- <link rel="stylesheet" href="https://cdn.datatables.net/2.0.0/css/dataTables.dataTables.css"> -->


<div class="main-panel">
  <div class="content-wrapper">
    <div class="row">
 

      <div class="col-lg-12 grid-margin stretch-card">
        <div class="card">
          <div class="card-body">
            <h4 class="card-title">Closing Stock PayerId In {{salesgroups}}</h4>
            <!-- <p class="card-description">
                Add class <code>.table-bordered</code>
              </p> -->
            <!-- <div class="row">
              <div class="col-md-8">
                <h4 class="card-title">Closing Stock Data</h4>
              </div>
              <div class="col-md-4">
                <div class="form-group">
                  <div class="input-group">
                    <input type="text" id="myInput" onkeyup="myFunction()" class="form-control"
                      placeholder="Search Stock Data" aria-label="Search Stock Data">
                    <div class="input-group-append">
                      <button class="btn btn-sm btn-secondary" type="button">Search</button>
                    </div>
                  </div>
                </div>
              </div>
            </div> -->

            <div class="col-md-6">
              <form action="/stocksales/{{ salesgroup }}" method="get">
                <div class="form-group row">
                  <label class="col-sm-3 col-form-label" for="date">
                    <h5>Selected Date:</h5>
                  </label>
                  <div class="col-sm-6">
                    <select class="form-control" id="date" name="date">
                      <option value="2024-02-29">2024-02-29</option>
                      <option value="2024-01-31">2024-01-31</option>
                      <option value="2023-12-31">2023-12-31</option>
                      <option value="2023-11-30">2023-11-30</option>
                      <option value="2023-11-15">2023-11-15</option>
                      <option value="2023-10-31">2023-10-31</option>
                    </select>
                  </div>
                  <div class="col-sm-3">
                    <button type="submit" class="btn btn-sm btn-secondary">Search</button>
                  </div>
                  <a href="/stocksales/{{ salesgroup }}"><button type="button">Remove</button></a> 
                </div>
              </form>
            </div>



            <div class="num_rows">
              <div class="form-group">
                <select class="form-control" name="state" id="maxRows">
                  <!-- <option value="10">10</option>
                  <option value="15">15</option>
                  <option value="20">20</option> -->
                  <option value="50">50</option>
                  <option value="70">70</option>
                  <option value="100">100</option>
                  <option value="5000">Show ALL Rows</option>
                </select>

              </div>
            </div>

            <div class="tb_search">
              <input type="text" id="search_input_all" onkeyup="FilterkeyWord_all_table()" class="form-control"
              placeholder="Search Stock Data" aria-label="Search Stock Data">
            </div>

            <div class="table-responsive pt-3">
              <table class="table table-striped" id="datatablesSimple" > <!-- id="example' -->
                <thead>
                  <tr>

                    <th>PayerId</th>
                    <th>Stockist Name</th>
                    <th>Opening</th>
                    <th>Primary Stock</th>
                    <th>Closing</th>
                    <th>Secondary</th>
                    <th>Secondary Amount</th>
                    <!-- <th>Total</th> -->

                   

                  </tr>
                </thead>

                <tbody>
                  
                  {% for item in dict_list %}
                  <tr>
                    <td><a href="{{ url_for('closingstockgrade',  payerId=item['payerId'],date=date, _external=True) }}"
                        class="offer-link">{{item['payerId']}}</a></td>
                    <td>{{item['stokist_name']}}</td>
                    <td>{{(item['Opening']|float)|int}}</td>
                    <td>{{(item['Primary_Stock']|float)|int}}</td>
                    <td>{{(item['Closing']|float)|int}}</td>
                    <td>{{(item['Secondary']|float)|int}}</td>
                    <td>{{(item['Grand_Total_Secondary_Amount']|float)|int}}</td>
                    <!-- <td>{{ (item['Opening']|float) + (item['Primary_Stock']|float)|int + (item['Closing']|float)|int + (item['Secondary']|float)|int + (item['Grand_Total_Secondary_Amount']|float)|int }}</td> -->
                    
                  </tr>
                  {% endfor %}

                  <tr>
                    <td><strong>Grand Total:</strong></td>
                    <td></td>
                    <td><strong>{{ Opening|int }}</strong></td>
                    <td><strong>{{ Primary_Stock|int }}</strong></td>
                    <td><strong>{{ Closing|int }}</strong></td>
                    <td><strong>{{ Secondary|int }}</strong></td>
                    <td><strong>{{ Grand_Total_Secondary_Amount|int }}</strong></td>
                  </tr>


                </tbody>
              </table>

             
             
            </div>

            
          </div>
        </div>
      </div>



    






    </div>
  </div>
  <!-- content-wrapper ends -->
  <!-- partial:../../partials/_footer.html -->

  <!-- partial -->
</div>

<!-- <div class="main-panel">
  <div class="content-wrapper">

    <div class="col-lg-12 stretch-card">
        <div class="card">
          <div class="card-body">
             <h4 class="card-title">Table with contextual classes</h4>
            <div class="table-responsive pt-3">
              <table class="table table-bordered">
                <thead>
                    <tr>
                      
                        <th>PayarId</th>
                        <th>StoclistName</th>
                        
                       
                       
                        


                       
                    </tr>
                </thead>

                <tbody>

                   
                    {% for item in dict_list %}
                    <tr>
                        <td><a href="/closingstockgrade /{{ Payerid }}/" class="offer-link">{{item['payerId']}}</a></td>
                        <td>{{item['stokist_name']}}</td>
                        
                    
                    
                 
                    </tr>
                    {% endfor %}
          
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>

    
  </div>
 
</div> -->
<!-- <script src="https://code.jquery.com/jquery-3.7.1.js"></script>
<script src="https://cdn.datatables.net/2.0.0/js/dataTables.js"></script>
<script>
new DataTable('#example', {
    pagingType: 'simple_numbers'
});
</script> -->


<!-- <script>
  function myFunction() {
    // Declare variables
    var input, filter, table, tr, td, i, txtValue;
    input = document.getElementById("myInput");
    filter = input.value.toUpperCase();
    table = document.getElementById("table-id");
    tr = table.getElementsByTagName("tr");

    // Loop through all table rows, and hide those who don't match the search query
    for (i = 0; i < tr.length; i++) {
      td = tr[i].getElementsByTagName("td")[0];
      if (td) {
        txtValue = td.textContent || td.innerText;
        if (txtValue.toUpperCase().indexOf(filter) > -1) {
          tr[i].style.display = "";
        } else {
          tr[i].style.display = "none";
        }
      }
    }
  }
</script> -->


{% endblock %}