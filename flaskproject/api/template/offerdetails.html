<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta name="description" content="" />
    <meta name="author" content="" />
    <title>SalesOffer</title>
    <link href="https://cdn.jsdelivr.net/npm/simple-datatables@latest/dist/style.css" rel="stylesheet" />
    <link href="{{ url_for('static', filename='css/styles.css') }}" rel="stylesheet">

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"
        integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <style>
        .pd2 {
            padding-left: 32px;
            padding-right: 32px;
        }

        .mat {
            margin-top: 32px;
        }

        .navbg {
            margin-left: 20px;
            float: right;
            color: black;
        }

        .navbg:hover {
            background: #ebebeb;
            padding: 1px 5px;
            border-radius: 5px;
            text-decoration: none;
            color: black;
        }

        .offer-link:hover {
            text-decoration: none;
            color: #000;
        }
    </style>
    <script src="https://use.fontawesome.com/releases/v6.1.0/js/all.js" crossorigin="anonymous"></script>
</head>

<body class="sb-nav-fixed">
    <nav class="sb-topnav navbar navbar-expand navbar-dark bg-black">
        <!-- Navbar Brand-->
        <a class="navbar-brand ps-3" href="">Scheme</a>

    </nav>

    <div id="layoutSidenav">

        <div id="layoutSidenav_content">
            <main>
                <div class="container-fluid pd2 mat">
                    <div class="card mb-4">
                        <div class="card-header" style="background-color:  rgb(248, 250, 250)">
                            <i class="fas fa-table me-1"></i>
                            <b>OFFER</b>
                            <!-- <a href="/sales" class="navbg" class="offer-link"><b>SecondarySalesData</b></a> -->
                            <a href="/employee" class="navbg"><b>Employee</b></a>
                            <a href="/dailysalesgroup" class="navbg" class="offer-link"><b>Dailysalesgroup</b></a>
                            
                            <a href="/google" class="navbg" class="offer-link"><b>Google</b></a>
                            
                            
                        </div>





                        <div class="modal fade" id="exampleModalCenter" tabindex="-1" role="dialog"
                            aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
                            <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <h5 class="modal-title" id="exampleModalLongTitle">Nashik</h5>

                                    </div>

                                </div>
                            </div>
                        </div>


                        <div class="row mx-2 mt-4">
                            {% for item in dict_list %}
                            <div class="col-xl-3 col-md-6">
                                <a id="{{ item['offer_name'] }}" onclick="setOfferName(id)"
                                    href="/offer/{{ item['offer_id'] }}/{{ item['id'] }}?offer_name={{ item['id'] }}"
                                    class="card-link offer-link">
                                    <div class="card bg-white text-black mb-4">

                                        <img src="http://142.93.208.119/media/{{ item['image'] }}" alt="Offer Image"
                                            class="img-fluid" style="width: 300px; height: 200px;">
                                        <div class="card-body"
                                            style="font-size: 15px; padding: 7px 15px; background: #f8fafa;">
                                            <!-- <div class="float-start">ID:{{ item['id'] }}</div> -->
                                            <div class="text-center"><b>Offer:</b> {{ item['offer_name'] }}</div>
                                        </div>
                                        <!-- <p style="margin: 0px; background-color:  rgb(248, 250, 250);" class="card-footer d-flex align-items-center justify-content-between text-warning">
                                        <a id="{{ item['offer_name'] }}" onclick="setOfferName(id)" href="/offer/{{ item['offer_id'] }}/{{ item['id'] }}?offer_name={{ item['id'] }}">OfferID:{{ item['offer_id'] }}</a>
                                    </p> -->
                                        <p style="margin: 0px; background: #f8fafa; padding: 7px 15px;"
                                            class="card-footer text-center">
                                            <a id="{{ item['offer_name'] }}" onclick="setOfferName(id)"
                                                href="/offer/{{ item['offer_id'] }}/{{ item['id'] }}?offer_name={{ item['id'] }}"
                                                class="offer-link"><b>OfferID:</b> {{ item['offer_id'] }}</a>
                                        </p>

                                    </div>
                            </div>
                            {% endfor %}


                            <!-- <div class="col-xl-3 col-md-6">
                                <div class="card bg-white text-black mb-4" style="width: 270px; height: 115px; ">
                                    <div class="card-body">
                                        <h5 style="font-size: 20px; ">Sales</h5>
                                        <div>
                                            <p style="margin: 10px;" class="card-footer d-flex align-items-center justify-content-between text-warning">
                                                <a href="/sales">SalesData</a>
                                            </p>
                                        </div>
                                    </div>
                                </div>
                        </div>

                        <div class="col-xl-3 col-md-6">
                            <div class="card bg-white text-black mb-4" style="width: 270px; height: 115px;">
                                <div class="card-body">
                                    <h5 style="font-size: 20px;">Employe Data</h5>
                                    <div>
                                        <p style="margin: 10px;" class="card-footer d-flex align-items-center justify-content-between text-warning">
                                            <a href="/employee">employee</a>
                                        </p>
                                    </div>
                                </div>
                            </div>
                    </div> -->



                        </div>

                    </div>
            </main>
            <div class="container-fluid pd2 mb-4">
                <div class="card">
                    <div class="card-header" style="text-align: center; background-color:  rgb(248, 250, 250)">
                        <b>Sales Offer</b>
                    </div>

                    <div class="mt-4 mb-3">
                        <canvas id="myDoughnutChart" width="400" height="400"></canvas>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/simple-datatables@latest" crossorigin="anonymous"></script>

    <script src="{{ url_for('static', filename='js/datatables-simple-demo.js') }}"></script>

    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
        integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js"
        integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js"
        integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
        crossorigin="anonymous"></script>

    <script>
        function tableToExcel() {
            const table = document.getElementById('datatablesSimple');
            const wb = XLSX.utils.table_to_book(table, { sheet: 'SheetJS' });
            const wbout = XLSX.write(wb, { bookType: 'xlsx', bookSST: true, type: 'binary' });

            function s2ab(s) {
                const buf = new ArrayBuffer(s.length);
                const view = new Uint8Array(buf);
                for (let i = 0; i < s.length; i++) view[i] = s.charCodeAt(i) & 0xFF;
                return buf;
            }

            saveAs(new Blob([s2ab(wbout)], { type: 'application/octet-stream' }), 'table_data.xlsx');
        }


        //  this for print one page to anthore page
        const setOfferName = (name) => {
            // console.log("abc");
            localStorage.setItem('offername', name)
        }

    </script>


    <!--  chart js using doughnut-->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- <script>
    var counts = {{ counts|tojson|safe }};
    var offer_ids = {{ offer_ids|tojson|safe }};

    
    var ctx = document.getElementById('myDoughnutChart').getContext('2d');
    var myDoughnutChart = new Chart(ctx, {
        type: 'doughnut',
        data: {
            labels: offer_ids,
            datasets: [{
                data: counts,
                backgroundColor: [
                    'rgb(255, 0, 0)',
                    'rgb(0, 0, 255)',
                    'rgb(60, 179, 113)',
                    'rgb(238, 130, 238)',
                    'rgb(255, 165, 0)',
                    'rgb(106, 90, 205)',
                    // 'yellow', 'aqua', 'pink', 'lightgreen', 'lightblue', 'gold'
                    
                ],
            }],
        },
        options: {
            responsive: true,
            maintainAspectRatio: false,
            expandOnClick: false,
   
        },
        
    });
</script> -->
    <script>
        // var counts = {{ counts|tojson|safe }};
        // console.log("countsss",counts)
        var counts = JSON.parse('{{ counts|tojson|safe }}');
        // console.log("countsss",counts)
        // var offer_ids = {{ offer_ids|tojson|safe }};
        var offer_ids = JSON.parse('{{ offer_ids|tojson|safe }}');
        // console.log("offer_ids",offer_ids)

        // Function to generate random color
        function getRandomColor() {
            var letters = '0123456789ABCDEF';
            var color = '#';
            for (var i = 0; i < 6; i++) {
                color += letters[Math.floor(Math.random() * 16)];
            }
            return color;
        }

        // Generate colors for each offer_id
        var backgroundColors = offer_ids.map(function () {
            return getRandomColor();
        });
        console.log("Ssssssssssssssss", backgroundColors)

        var ctx = document.getElementById('myDoughnutChart').getContext('2d');
        var myDoughnutChart = new Chart(ctx, {
            type: 'doughnut',
            data: {
                labels: offer_ids,
                datasets: [{
                    data: counts,
                    backgroundColor: backgroundColors,
                }],
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                expandOnClick: false,
            },
        });
    </script>


    <script src="https://cdn.jsdelivr.net/npm/xlsx/dist/xlsx.full.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/file-saver@2/dist/FileSaver.min.js"></script>
</body>

</html>